{
  "application": {
    "title": "Praça das Profissões",
    "theme": "bootswatch-cosmo",
    "packages": {
      "meteor": [
        "email"
      ]
    },
    "copy_files": [
      {
        "source": "files/logo.png",
        "dest": "PUBLIC_IMAGES_DIR/logo.png"
      },
      {
        "source": "files/background.png",
        "dest": "PUBLIC_IMAGES_DIR/background.png"
      },
      {
        "source": "files/styles.css",
        "dest": "CLIENT_STYLES_DIR/styles.css"
      }
    ],
    "queries": [
      {
        "name": "current_user_data",
        "collection": "users",
        "filter": {
          "_id": "Meteor.userId()"
        },
        "find_one": true
      },
      {
        "name": "my_school",
        "collection": "schools",
        "find_one": true,
        "filter": {
          "createdBy": "Meteor.userId()"
        }
      },
      {
        "name": "escola_vazia",
        "collection": "schools",
        "filter": {
          "_id": null
        },
        "find_one": true
      }
    ],
    "login_with_password": true,
    "roles": [
      "admin",
      "manager",
      "user"
    ],
    "default_role": "user",
    "collections": [
      {
        "name": "schools",
        "roles_allowed_to_read": [
          "owner",
          "admin",
          "manager"
        ],
        "roles_allowed_to_insert": [
          "user",
          "admin"
        ],
        "roles_allowed_to_update": [
          "owner",
          "admin"
        ],
        "roles_allowed_to_delete": [
          "owner",
          "admin"
        ],
        "fields": [
          {
            "name": "name",
            "title": "Nome da Escola",
            "required": true
          },
          {
            "name": "cnpj",
            "title": "CNPJ da Escola",
            "required": true
          },
          {
            "name": "address",
            "title": "Endereço da Escola",
            "required": true
          },
          {
            "name": "phone",
            "title": "Telefone da Escola",
            "default": "-"
          },
          {
            "name": "director",
            "title": "Diretor Geral da Escola",
            "required": true
          },
          {
            "name": "president",
            "title": "Presidente do Conselho Escolar",
            "required": true
          },
          {
            "name": "type",
            "title": "Tipo",
            "required": true,
            "input": "select",
            "input_items": [
              {
                "value": "eeefm",
                "title": "EEEFM"
              },
              {
                "value": "particular",
                "title": "Particular"
              },
              {
                "value": "outro",
                "title": "Outro"
              }
            ]
          },
          {
            "name": "classes",
            "title": "Turmas",
            "type": "array",
            "array_item_type": "object",
            "input": "crud",
            "crud_fields": [
              {
                "name": "year",
                "title": "Ano",
                "required": true,
                "input": "select",
                "input_items": [
                  {
                    "value": "nono",
                    "title": "9o ano fundamental"
                  },
                  {
                    "value": "primeiro ",
                    "title": "1o ano médio"
                  },
                  {
                    "value": "segundo",
                    "title": "2o ano médio"
                  },
                  {
                    "value": "terceiro",
                    "title": "3o ano médio"
                  }
                ]
              },
              {
                "name": "shift",
                "title": "Turno",
                "required": true,
                "input": "select",
                "input_items": [
                  {
                    "value": "manha",
                    "title": "Manhã"
                  },
                  {
                    "value": "tarde",
                    "title": "Tarde"
                  }
                ]
              },
              {
                "name": "class",
                "title": "Turma",
                "display_helper": "Turma A, B, C... (se houver somente uma, deixe vazio)",
                "default": "-"
              }
            ]
          }
        ]
      },
      {
        "name": "visits",
        "roles_allowed_to_read": [
          "owner",
          "admin",
          "manager"
        ],
        "roles_allowed_to_insert": [
          "admin",
          "manager"
        ],
        "roles_allowed_to_update": [
          "owner",
          "admin",
          "manager"
        ],
        "roles_allowed_to_delete": [
          "owner",
          "admin"
        ],
        "fields": [
          {
            "name": "date",
            "title": "Data",
            "required": true,
            "type": "date",
            "format": "DD/MM/YYYY"
          },
          {
            "name": "shift",
            "title": "Turno",
            "required": true,
            "input": "select",
            "input_items": [
              {
                "value": "manha",
                "title": "Manhã"
              },
              {
                "value": "tarde",
                "title": "Tarde"
              }
            ]
          }
        ]
      }
    ],
    "public_zone": {
      "navbar_class": "navbar-default navbar-fixed-top",
      "pages": [
        {
          "name": "home_public",
          "template_rendered_code": "$('.sistema').hide(); $('.inicio').show(); $('html,body').scrollTop(0);",
          "container_class": "bg",
          "components": [
            {
              "name": "myheader",
              "type": "custom_component",
              "custom_template": "files/header.html",
              "dest_position": "before"
            },
            {
              "name": "section_sobre",
              "type": "section",
              "components": [
                {
                  "name": "sobre1",
                  "type": "div",
                  "class": "col-md-6",
                  "components": [
                    {
                      "name": "sobre1_col",
                      "type": "markdown",
                      "source_file": "texts/sobre1.md"
                    }
                  ]
                },
                {
                  "name": "sobre2",
                  "type": "div",
                  "class": "col-md-6",
                  "components": [
                    {
                      "name": "sobre2_cols",
                      "type": "markdown",
                      "source_file": "texts/sobre2.md"
                    }
                  ]
                }
              ]
            },
            {
              "name": "section_programacao",
              "type": "section",
              "components": [
                {
                  "name": "mycalendar",
                  "type": "custom_component",
                  "custom_template": "files/calendar.html"
                }
              ]
            },
            {
              "name": "section_contato",
              "type": "section",
              "components": [
                {
                  "name": "contact",
                  "type": "form",
                  "title": "Alguma dúvida? Mande uma mensagem!",
                  "mode": "insert",
                  "fields": [
                    {
                      "name": "name",
                      "title": "Nome",
                      "required": true
                    },
                    {
                      "name": "email",
                      "title": "E-mail",
                      "type": "email",
                      "required": true
                    },
                    {
                      "name": "message",
                      "title": "Mensagem",
                      "input": "textarea",
                      "required": true
                    }
                  ],
                  "submit_button_title": "Enviar",
                  "submit_code": "Meteor.call('sendMail', { from: values.name + ' <' + values.email + '>', to: 'pracadasprofissoes@gmail.com', subject: 'Formulário de Contato: ' + values.name, text: values.message}, function(e) {  if(e) errorAction(e.message); else submitAction('Sua mensagem foi enviada. Responderemos em breve :)'); } );"
                }
              ]
            },
            {
              "name": "footer",
              "type": "custom_component",
              "custom_template": "files/footer.html"
            }
          ]
        },
        {
          "name": "sistema",
          "template_rendered_code": "$('.inicio').hide(); $('.sistema').show();",
          "components": [
            {
              "name": "home_jumbotron",
              "title": "Sistema de visitas<br/> da Praça das Profissões",
              "type": "jumbotron",
              "button_title": "Entre &raquo;",
              "button_route": "sistema.entrar"
            }
          ],
          "pages": [
            {
              "name": "entrar",
              "custom_template": "files/login.html"
            },
            {
              "name": "registrar",
              "template": "register"
            },
            {
              "name": "esqueceu_senha",
              "template": "forgot_password"
            },
            {
              "name": "resetar_senha",
              "template": "reset_password",
              "route_params": [
                "resetPasswordToken"
              ]
            }
          ]
        }
      ],
      "components": [
        {
          "name": "left_menu",
          "type": "menu",
          "class": "nav navbar-nav",
          "items": [
            {
              "title": "Início",
              "route": "home_public"
            },
            {
              "title": "Sistema",
              "route": "sistema"
            }
          ]
        },
        {
          "name": "right_menu_inicio",
          "type": "menu",
          "class": "nav navbar-nav navbar-right inicio",
          "items": [
            {
              "title": "A Praça",
              "url": "#sobre"
            },
            {
              "title": "Programação",
              "url": "#programacao"
            },
            {
              "title": "Contato",
              "url": "#contato"
            }
          ]
        },
        {
          "name": "right_menu_sistema",
          "type": "menu",
          "class": "nav navbar-nav navbar-right sistema",
          "items": [
            {
              "title": "Registrar",
              "route": "sistema.registrar"
            },
            {
              "title": "Entrar",
              "route": "sistema.entrar"
            }
          ]
        }
      ]
    },
    "private_zone": {
      "navbar_class": "navbar-default navbar-fixed-top",
      "pages": [
        {
          "name": "home_private",
          "title": "Olá, {{userFullName}}!"
        },
        {
          "name": "configuracoes",
          "pages": [
            {
              "name": "perfil",
              "components": [
                {
                  "name": "edit_form",
                  "type": "form",
                  "mode": "update",
                  "title": "Edite seu perfil",
                  "submit_route": "configuracoes.perfil",
                  "query_name": "current_user_data",
                  "query_params": [],
                  "fields": [
                    {
                      "name": "perfil.name",
                      "title": "Nome",
                      "required": true
                    },
                    {
                      "name": "perfil.email",
                      "title": "E-mail",
                      "type": "email",
                      "required": true
                    }
                  ]
                }
              ]
            },
            {
              "name": "alterar_senha",
              "template": "change_pass"
            }
          ],
          "components": [
            {
              "name": "side_menu",
              "type": "menu",
              "class": "nav nav-stacked nav-pills",
              "items": [
                {
                  "title": "Perfil",
                  "route": "configuracoes.perfil"
                },
                {
                  "title": "Alterar senha",
                  "route": "configuracoes.alterar_senha"
                }
              ]
            }
          ]
        },
        {
          "name": "escola",
          "title": "Minha escola",
          "type": "data_view",
          "text_if_empty": "Você ainda não cadastrou sua escola.",
          "query_name": "my_school",
          "query_params": []
        },
        {
          "name": "cadastrar_escola",
          "components": [
            {
              "name": "cadastrar_escola_form",
              "title": "Cadastrar escola",
              "type": "form",
              "mode": "insert",
              "query_name": "escola_vazia",
              "submit_route": "escola",
              "cancel_route": "escola"
            },
          ]
        },
        {
          "name": "sair",
          "template": "logout",
          "action_code": "Meteor.logout(function(err) {Session.set('ses', false)});"
        }
      ],
      "components": [
        {
          "name": "left_menu",
          "type": "menu",
          "class": "nav navbar-nav",
          "dest_selector": "#menu",
          "items": [
            {
              "title": "Início",
              "route": "home_private"
            }
          ]
        },
        {
          "name": "right_menu",
          "type": "menu",
          "class": "nav navbar-nav navbar-right",
          "dest_selector": "#menu",
          "items": [
            {
              "title": "{{userEmail}}",
              "items": [
                {
                  "title": "Configurações",
                  "route": "configuracoes"
                },
                {
                  "title": "Sair",
                  "route": "sair"
                }
              ]
            }
          ]
        }
      ]
    }
  }
}